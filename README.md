# solidity-demo

最近我在学习 solidity 的相关内容。为了更好地理解和掌握 solidity，我计划在学习理论知识的同时，通过代码实践来加深理解。

边学边做，是掌握新技术的最佳方式。

## 基础知识

- [IERC20 协议](docs/ierc20.md)
- [水龙头合约](docs/faucet.md)
- [IERC721 协议](docs/ierc721.md)
- [荷兰拍卖合约](docs/dutchAuction.md)
- [默克尔树](docs/merkleTree.md)
- [数字签名 ECDSA](docs/ecdsa.md)
- [IERC1155 协议](docs/ierc1155.md)

## 综合项目练习

### 去中心化投资基金(DAO)

#### 项目概述

这是一个允许用户共同投资和管理加密资产的去中心化投资基金。用户可以通过存入资产获得治理代币，参与投资决策和收益分配。

#### 核心功能模块

1. **资金池管理 (Vault)**

   - 基于 ERC4626 标准实现代币化资金池
   - 支持存入/提取 ETH 和主流 ERC20 代币
   - 根据存入资产自动铸造对应比例的治理代币
   - 实现资产定价预言机，确保准确的份额计算
   - 支持紧急暂停机制

2. **多签钱包 (MultiSig)**

   - 实现管理员多签钱包，负责资金池重大决策
   - 设置多签持有人和确认门限
   - 提案创建、确认和执行流程
   - 多签持有人管理（添加/删除）
   - 交易执行记录和事件日志

3. **治理系统 (Governance)**

   - 基于治理代币的投票权重
   - 使用 EIP712 实现链下投票签名
   - 提案创建、投票和执行流程
   - 时间锁定机制
   - 投票委托功能

4. **投资策略 (Strategy)**

   - 可插拔的投资策略合约
   - 支持主流 DeFi 协议（如 Uniswap、Aave）
   - 收益收集和再投资机制
   - 风险控制参数设置
   - 策略绩效分析

5. **访问控制 (Access Control)**

   - 基于默克尔树的白名单验证
   - 分层次的角色权限管理
   - KYC/AML 合规支持
   - 资金池参与者限制

6. **合约升级 (Upgrade)**
   - 实现透明代理模式
   - 升级提案和多签确认
   - 状态变量迁移方案
   - 版本管理和回滚机制

#### 技术规范

1. **智能合约架构**

   - 使用 Hardhat/Foundry 开发框架
   - OpenZeppelin 合约库集成
   - 完整的测试覆盖
   - Gas 优化

2. **前端界面**

   - React + ethers.js/web3.js
   - 钱包连接（MetaMask等）
   - 资产管理界面
   - 治理投票界面

3. **部署环境**

   - 测试网：Sepolia/Goerli
   - 主网：Ethereum/Polygon

4. **安全考虑**
   - 完整的审计清单
   - 常见攻击防护
   - 应急预案
   - 漏洞赏金计划

#### 项目里程碑

1. **Phase 1: 基础设施（2周）**

   - 搭建开发环境
   - 实现基础合约
   - 部署测试网络

2. **Phase 2: 核心功能（4周）**

   - 资金池实现
   - 多签钱包
   - 治理系统

3. **Phase 3: 高级功能（3周）**

   - 投资策略
   - 访问控制
   - 升级机制

4. **Phase 4: 前端开发（3周）**

   - UI/UX 设计
   - 功能实现
   - 测试和优化

5. **Phase 5: 测试和部署（2周）**
   - 安全审计
   - 测试网部署
   - 文档完善

#### 测试场景

1. **资金池操作**

   - 存入不同类型资产
   - 提取资产和收益
   - 紧急情况处理

2. **治理流程**

   - 提案创建和投票
   - 链下签名验证
   - 提案执行

3. **投资策略**

   - 策略切换
   - 收益再投资
   - 风险控制

4. **异常处理**
   - 合约升级
   - 应急暂停
   - 资金找回

### 跨链NFT交易市场

- 结合ERC721和ERC1155
- 实现跨链桥功能
- 荷兰拍卖+批量购买
- 闪电贷实现杠杆交易
- 多重调用优化gas
- 数字签名实现链下订单

### DeFi借贷协议

- ERC4626实现资金池
- 闪电贷功能
- ERC2612实现gasless交易
- 可升级合约设计
- 多签管理
- 跨链资产桥接

### GameFi项目

- ERC1155实现游戏道具
- ERC721实现角色NFT
- 默克尔树实现成就系统
- 多重调用实现批量操作
- 跨链桥实现多链游戏资产
- EIP712签名实现链下操作
